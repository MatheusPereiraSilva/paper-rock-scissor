<!DOCTYPE html>
<html lang="pt_br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Rock, Paper, Scissors!</title>
    <style>
      .player-options,
      .enemy-options {
        max-width: 150px;
        opacity: 0.3;
        cursor: pointer;
      }
      .player-options {
        margin-right: 500px;
      }
      .align {
        display: flex;
      }
      .opacidade {
        opacity: 1;
      }
    </style>
  </head>
  <body>
    <h1 style="text-align: center">Pedra, Papel ou Tesoura!</h1>
    <hr />
    <div class="align">
      <div class="player-options">
        <div><img opt="rock" src="./rock.png" /></div>
        <div><img opt="paper" src="./paper.png" /></div>
        <div><img opt="scissor" src="./scisor.png" /></div>
      </div>
      <div class="enemy-options">
        <div><img opt="rock" src="./rock.png" /></div>
        <div><img opt="paper" src="./paper.png" /></div>
        <div><img opt="scissor" src="./scisor.png" /></div>
      </div>
    </div>
    <script>
      var elementos = document.querySelectorAll(".player-options div > img");
      var playerOpt = '';
      var inimigoOpt = '';

      function validarVitoria() {
            if(playerOpt == 'paper') {
                if(inimigoOpt == 'paper'){
                    alert('Empatou');
                } else if(inimigoOpt == 'scissor') {
                    alert('Você Perdeu');
                } else if(inimigoOpt == 'rock') {
                    alert('Você Ganhou');
                }
            }

            if(playerOpt == 'rock') {
                if(inimigoOpt == 'paper'){
                    alert('Você Perdeu');
                } else if(inimigoOpt == 'scissor') {
                    alert('Você ganhou');
                } else if(inimigoOpt == 'rock') {
                    alert('Empatou');
                }
            }

            if(playerOpt == 'scissor') {
                if(inimigoOpt == 'paper'){
                    alert('Você Ganhou');
                } else if(inimigoOpt == 'scissor') {
                    alert('Empatou');
                } else if(inimigoOpt == 'rock') {
                    alert('Você Perdeu');
                }
            }
        }

      function resetInimigo() {
        var enemyOptions = document.querySelectorAll('.enemy-options div');
        for (var i = 0; i < enemyOptions.length; i++) {
          enemyOptions[i].childNodes[0].style.opacity = 0.3;
        }
      }

      function inimigoJogar() {
        var rand = Math.floor(Math.random() * 3);
        var enemyOptions = document.querySelectorAll('.enemy-options div');
        resetInimigo();

        for (var i = 0; i < enemyOptions.length; i++) {
          if (i === rand) {
            enemyOptions[i].childNodes[0].style.opacity = 1;
            inimigoOpt = enemyOptions[i].childNodes[0].getAttribute('opt');
          }
        }

        validarVitoria();
      }

      function resetOpacityPlayer() {
        for (var i = 0; i < elementos.length; i++) {
          elementos[i].style.opacity = 0.3;
        }
      }

      for (var i = 0; i < elementos.length; i++) {
        elementos[i].addEventListener("click", function (t) {
          resetOpacityPlayer();
          t.target.style.opacity = 1;
          playerOpt = t.target.getAttribute('opt');
          inimigoJogar();
        });
      }
    </script>
  </body>
</html>
